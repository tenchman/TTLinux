--- libminigui-1.3.3/.config.diet	2004-09-19 12:34:20.351394744 +0200
+++ libminigui-1.3.3/.config	2004-09-19 12:34:20.351394744 +0200
@@ -0,0 +1,184 @@
+#
+# Automatically generated by make menuconfig: don't edit
+#
+
+#
+# System wide options
+#
+CONFIG_LITE=n
+CONFIG_INCORE_RES=n
+CONFIG_TIMERUNIT10MS=y
+CONFIG_CURSORSUPPORT=y
+CONFIG_MOVEABLE=y
+CONFIG_DBCLK=y
+CONFIG_DEBUG=n
+CONFIG_TRACEMESSAGE=n
+CONFIG_MSGSTR=n
+
+#
+# GAL engine options
+#
+CONFIG_NEWGAL=y
+CONFIG_OLDGAL=n
+CONFIG_NEWGAL_FBCON=y
+CONFIG_NEWGAL_QVFB=y
+CONFIG_NEWGAL_ECOSLCD=y
+CONFIG_NEWGAL_DUMMY=y
+CONFIG_GAL_NATIVE_TEXTMODE=y
+
+#
+# IAL engine options
+#
+CONFIG_IAL_EP7211=n
+CONFIG_IAL_ADS=n
+CONFIG_IAL_IPAQ=n
+CONFIG_IAL_MPC823=n
+CONFIG_IAL_PX255B=n
+CONFIG_IAL_VR4181=n
+CONFIG_IAL_HELIO=n
+CONFIG_IAL_MTT800=n
+CONFIG_IAL_SMDK2410=n
+CONFIG_IAL_MC68X328=n
+CONFIG_IAL_DUMMY=y
+CONFIG_IAL_NATIVE=y
+CONFIG_IAL_NATIVE_PS2MOUSE=y
+CONFIG_IAL_NATIVE_IMPS2MOUSE=y
+CONFIG_IAL_NATIVE_MSMOUSE=y
+CONFIG_IAL_NATIVE_MS3MOUSE=y
+CONFIG_IAL_NATIVE_GPM=y
+
+#
+# Font options
+#
+CONFIG_FONT_RBF=y
+CONFIG_FONT_VBF=y
+CONFIG_FONT_INCORESSERIF=y
+CONFIG_FONT_INCORECOURIER=y
+CONFIG_FONT_INCORESYMBOL=y
+CONFIG_FONT_INCOREVGAS=y
+CONFIG_FONT_QPF=y
+CONFIG_FONT_TTF=y
+CONFIG_FONT_TYPE1=y
+
+#
+# Charset options
+#
+CONFIG_CHARSET_LATIN2=n
+CONFIG_CHARSET_LATIN3=n
+CONFIG_CHARSET_LATIN4=n
+CONFIG_CHARSET_CYRILLIC=n
+CONFIG_CHARSET_ARABIC=n
+CONFIG_CHARSET_GREEK=n
+CONFIG_CHARSET_HEBREW=n
+CONFIG_CHARSET_LATIN5=n
+CONFIG_CHARSET_LATIN6=n
+CONFIG_CHARSET_THAI=n
+CONFIG_CHARSET_LATIN7=n
+CONFIG_CHARSET_LATIN8=n
+CONFIG_CHARSET_LATIN9=y
+CONFIG_CHARSET_LATIN10=n
+CONFIG_CHARSET_GB2312=y
+CONFIG_CHARSET_GBK=y
+CONFIG_CHARSET_GB18030=n
+CONFIG_CHARSET_BIG5=y
+CONFIG_CHARSET_EUCKR=n
+CONFIG_CHARSET_EUCJP=n
+CONFIG_CHARSET_SHIFTJIS=n
+CONFIG_CHARSET_UNICODE=y
+
+#
+# Keyboard layout specific options
+#
+CONFIG_KBD_FRPC=n
+CONFIG_KBD_FR=n
+CONFIG_KBD_DE=n
+CONFIG_KBD_DELATIN1=n
+CONFIG_KBD_IT=n
+CONFIG_KBD_ES=n
+CONFIG_KBD_ESCP850=n
+
+#
+# Image options
+#
+CONFIG_IMAGE_SAVEBMP=y
+CONFIG_IMAGE_PCX=n
+CONFIG_IMAGE_LBM=n
+CONFIG_IMAGE_TGA=n
+CONFIG_IMAGE_GIF=y
+CONFIG_IMAGE_JPG=y
+CONFIG_IMAGE_PNG=y
+
+#
+# Input method options
+#
+CONFIG_IME_GB2312=y
+CONFIG_IME_GB2312PINYIN=y
+
+#
+# Appearance options
+#
+CONFIG_APPEARANCE_FLATSTYLE=n
+CONFIG_APPEARANCE_TINYSCR=n
+
+#
+# Misc options
+#
+CONFIG_MISC_ABOUTDLG=y
+CONFIG_MISC_SAVESCR=y
+
+#
+# Controls options
+#
+CONFIG_CTRL_STATIC=y
+CONFIG_CTRL_BUTTON=y
+CONFIG_CTRL_SIMEDIT=y
+CONFIG_CTRL_SLEDIT=y
+CONFIG_CTRL_MLEDIT=y
+CONFIG_CTRL_LISTBOX=y
+CONFIG_CTRL_PROGRESSBAR=y
+CONFIG_CTRL_TOOLBAR=y
+CONFIG_CTRL_NEWTOOLBAR=y
+CONFIG_CTRL_MENUBUTTON=y
+CONFIG_CTRL_TRACKBAR=y
+CONFIG_CTRL_COMBOBOX=y
+CONFIG_CTRL_PROPSHEET=y
+
+#
+# Ext library options
+#
+CONFIG_EXT_TREEVIEW=y
+CONFIG_EXT_LISTVIEW=y
+CONFIG_EXT_GRID=y
+CONFIG_EXT_MONTHCAL=y
+CONFIG_EXT_SPINBOX=y
+CONFIG_EXT_COOLBAR=y
+CONFIG_EXT_FULLGIF=n
+CONFIG_EXT_SKIN=n
+CONFIG_LIBVCONGUI=y
+
+#
+# Development environment options
+#
+CONFIG_PLATFORM_LINUX=y
+CONFIG_PLATFORM_UCLINUX=n
+CONFIG_PLATFORM_ECOS=n
+CONFIG_COMPILER_ARM=n
+CONFIG_COMPILER_ARMV4L=n
+CONFIG_COMPILER_MIPSEL=n
+CONFIG_COMPILER_PPC=n
+CONFIG_COMPILER_M68K_ELF=n
+CONFIG_COMPILER_ARM_ELF=n
+CONFIG_COMPILER_X86_DIET=y
+CONFIG_COMPILER_X86=n
+CONFIG_LIBC_GLIBC=n
+CONFIG_LIBC_DIETLIBC=y
+CONFIG_LIBC_UCLIBC=n
+TARGET_ARCH=i386
+TARGET=i386-dietlibc-linux
+HOST=i386-dietlibc-linux
+CC=i386-dietlibc-linux-gcc
+ADD_CFLAGS="-D_BSD_SOURCE -Os -fPIC"
+DEF_PREFIX=/opt/diet
+DIETLIBC_HEADER=$/opt/diet/include
+DIETLIBC_LIB=$/opt/diet/lib-i386
+PREFIX=/opt/diet
--- libminigui-1.3.3/include/endianrw.h.diet	2004-09-19 10:59:30.283823120 +0200
+++ libminigui-1.3.3/include/endianrw.h	2004-09-19 11:00:52.491325680 +0200
@@ -354,7 +354,11 @@
 /* The macros used to swap values */
 /* Try to use superfast macros on systems that support them */
 #ifdef linux
-#include <asm/byteorder.h>
+#ifdef __dietlibc__
+# include <endian.h>
+#else
+# include <asm/byteorder.h>
+#endif
 #ifdef __arch__swab16
 #define ArchSwap16  __arch__swab16
 #endif
--- libminigui-1.3.3/vcongui/vcongui.c.diet	2004-09-19 12:30:23.327427864 +0200
+++ libminigui-1.3.3/vcongui/vcongui.c	2004-09-19 12:31:19.280921640 +0200
@@ -67,6 +67,9 @@
 #include <sys/ioctl.h>
 #include <sys/types.h>
 #include <sys/poll.h>
+#ifdef __dietlibc__
+#include <termios.h>
+#endif
 
 #include "common.h"
 #include "minigui.h"
--- libminigui-1.3.3/vcongui/vt.h.diet	2004-09-19 13:22:48.395806864 +0200
+++ libminigui-1.3.3/vcongui/vt.h	2004-09-19 13:23:05.985132880 +0200
@@ -47,7 +47,7 @@
 typedef struct _CodingInfo 
 {
     char *name;
-    u_char sign0, sign1;
+    unsigned char sign0, sign1;
 }CODINGINFO;
 
 void VtInit (void);
--- libminigui-1.3.3/vcongui/paint.h.diet	2004-09-19 13:29:00.325264992 +0200
+++ libminigui-1.3.3/vcongui/paint.h	2004-09-19 13:27:19.056660160 +0200
@@ -34,7 +34,7 @@
 void WindowStringPut (PCONINFO con, const char* text, 
                             int fc, int bc, int x, int y);
 void WindowWput (PCONINFO con, WORD word, int fc, int bc, int pos);
-void WindowSput (PCONINFO con, u_char ch, int fc, int bc, int pos);
+void WindowSput (PCONINFO con, unsigned char ch, int fc, int bc, int pos);
 void WindowSetCursor (PCONINFO con, int x, int y, bool IsKanji);
 
 #define WindowHideCaret HideCaret
--- libminigui-1.3.3/vcongui/terminal.c.diet	2004-09-19 13:26:11.924865744 +0200
+++ libminigui-1.3.3/vcongui/terminal.c	2004-09-19 13:26:40.027593480 +0200
@@ -294,10 +294,10 @@
 
 void HandleInputChar (PCONINFO con, WPARAM wParam, LPARAM lParam)
 {
-    u_char ch;
+    unsigned char ch;
     
     if (HIBYTE (wParam)) {
-        u_char buff [2];
+        unsigned char buff [2];
         buff [0] = LOBYTE (wParam);
         buff [1] = HIBYTE (wParam);
         write (con->masterPty, buff, 2);
@@ -338,17 +338,17 @@
     con->kinfo.oldstate = con->kinfo.state;
 }
 
-static inline u_int TextAddress (CONINFO *con, u_int x, u_int y)
+static inline unsigned int TextAddress (CONINFO *con, unsigned int x, unsigned int y)
 {
     return (con->textHead + x + y * con->dispxmax) % con->textSize;
 }
 
-static inline bool IsKanji (CONINFO *con, u_int x, u_int y)
+static inline bool IsKanji (CONINFO *con, unsigned int x, unsigned int y)
 {
     return(*(con->flagBuff + TextAddress (con, x, y)) & CODEIS_1);
 }
 
-static inline bool IsKanji2 (CONINFO *con, u_int x, u_int y)
+static inline bool IsKanji2 (CONINFO *con, unsigned int x, unsigned int y)
 {
     return(*(con->flagBuff + TextAddress (con, x, y)) & CODEIS_2);
 }
--- libminigui-1.3.3/vcongui/vt.c.diet	2004-09-19 13:24:06.782890216 +0200
+++ libminigui-1.3.3/vcongui/vt.c	2004-09-19 13:25:17.732104296 +0200
@@ -128,8 +128,8 @@
  **************************************************************************/
 static void EscSetAttr (CONINFO *con, int col)
 {
-    static const u_char table[] = {0, 4, 2, 6, 1, 5, 3, 7};
-    u_char    swp;
+    static const unsigned char table[] = {0, 4, 2, 6, 1, 5, 3, 7};
+    unsigned char    swp;
     
     switch(col) {
     case 0:    /* off all attributes */
@@ -220,7 +220,7 @@
     }
 }
 
-static void VtSetMode (CONINFO *con, u_char mode, bool sw)
+static void VtSetMode (CONINFO *con, unsigned char mode, bool sw)
 {
     switch(mode) {
     case 4:
@@ -233,7 +233,7 @@
     }
 }
 
-static void EscReport (CONINFO *con, u_char mode, u_short arg)
+static void EscReport (CONINFO *con, unsigned char mode, unsigned short arg)
 {
     char report[LEN_REPORT];
     
@@ -258,9 +258,9 @@
 }
 
 /* ESC [ ..... */
-static void EscBracket (CONINFO *con, u_char ch)
+static void EscBracket (CONINFO *con, unsigned char ch)
 {
-    u_char    n;
+    unsigned char    n;
 
     if (ch >= '0' && ch <= '9') {
         con->varg[con->narg] = (con->varg[con->narg] * 10) + (ch - '0');
@@ -451,7 +451,7 @@
     {NULL, 0, 0}
 };
 
-static void EscSetDCodeG0 (CONINFO *con, u_char ch)
+static void EscSetDCodeG0 (CONINFO *con, unsigned char ch)
 {
     int i = 0;
     
@@ -466,7 +466,7 @@
     default:
     	while (DCodingInfo [i].sign0) {
 	        if (DCodingInfo[i].sign0 == ch) {
-		        con->db = (u_char)i|LATCH_1;
+		        con->db = (unsigned char)i|LATCH_1;
 		        break;
 	        }
 	        i ++;
@@ -477,7 +477,7 @@
     con->esc = NULL;
 }
 
-static void EscSetSCodeG0 (CONINFO *con, u_char ch)
+static void EscSetSCodeG0 (CONINFO *con, unsigned char ch)
 {
     int i = 0;
     
@@ -489,12 +489,12 @@
     default:
     	while (SCodingInfo [i].sign0) {
 	        if (SCodingInfo [i].sign0 == ch) {
-		        con->sb = (u_char)i;
+		        con->sb = (unsigned char)i;
 		        con->g[0] = CS_LEFT;
 		        break;
 	        }
             else if (SCodingInfo [i].sign1 == ch) {
-		        con->sb = (u_char)i;
+		        con->sb = (unsigned char)i;
 		        con->g[0] = CS_RIGHT;
 		        break;
 	        }
@@ -506,7 +506,7 @@
     con->esc = NULL;
 }
 
-static void EscSetSCodeG1 (CONINFO *con, u_char ch)
+static void EscSetSCodeG1 (CONINFO *con, unsigned char ch)
 {
     switch(ch) {
     case 'U':
@@ -528,7 +528,7 @@
 }
 
 /* Escape code handling */
-static void EscStart (CONINFO *con, u_char ch)
+static void EscStart (CONINFO *con, unsigned char ch)
 {
     con->esc = NULL;
     
@@ -597,7 +597,7 @@
 }
 
 #ifdef USECCEWAY
-static inline bool iskanji_byte1 (PCONINFO con, u_char c)
+static inline bool iskanji_byte1 (PCONINFO con, unsigned char c)
 {
     switch(con->sysCoding) {
     case CODE_SJIS:
@@ -613,7 +613,7 @@
     }
 }
 
-static inline bool iskanji_byte2 (PCONINFO con, u_char c)
+static inline bool iskanji_byte2 (PCONINFO con, unsigned char c)
 {
     switch(con->sysCoding) {
     case CODE_SJIS:
@@ -630,7 +630,7 @@
 }
 #endif
 
-static inline bool iskanji (PCONINFO con, u_char c, u_char c1)
+static inline bool iskanji (PCONINFO con, unsigned char c, unsigned char c1)
 {
     switch(con->sysCoding) {
     case CODE_SJIS:
@@ -647,14 +647,14 @@
     }
 }
 
-static inline u_int text_offset (CONINFO *con, u_int x, u_int y)
+static inline unsigned int text_offset (CONINFO *con, unsigned int x, unsigned int y)
 {
     return (con->textHead + x + y * con->dispxmax) % con->textSize;
 }
 
-int FirstOrSecondByte (CONINFO* con, u_char ch)
+int FirstOrSecondByte (CONINFO* con, unsigned char ch)
 {
-    u_int prev_addr = -1;
+    unsigned int prev_addr = -1;
     
     if (con->x == 0) {
         if (con->y > con->ymin) {
@@ -676,10 +676,10 @@
 
 void RearrangeLineWhenInsSB (CONINFO* con)
 {
-    u_int addr;
+    unsigned int addr;
     int i;
     int prev = CODEIS_S;
-    u_char ch, ch1;
+    unsigned char ch, ch1;
     
     addr = text_offset (con, con->x, con->y) + 1;
 
@@ -713,7 +713,7 @@
  ****************************************************************************/
 void VtWrite (CONINFO *con, const char *buff, int nchars)
 {
-    u_char    ch, ch1;
+    unsigned char    ch, ch1;
 
   /* This is all the esc sequence strings */
 #if 0
@@ -868,7 +868,7 @@
                         switch(con->sysCoding) 
                         {
                         case CODE_EUC:
-                            if (con->knj1 == (u_char)CHAR_SS2) {
+                            if (con->knj1 == (unsigned char)CHAR_SS2) {
                                 /* handling 'kata-kana' */
                                 if (con->ins)
                                     TextInsertChar (con, 1);
@@ -974,9 +974,9 @@
 
     con->cursorsw = true;
 
-    con->textBuff = (u_char *)calloc (con->cols, con->rows);
-    con->attrBuff = (u_char *)calloc (con->cols, con->rows);
-    con->flagBuff = (u_char *)calloc (con->cols, con->rows);
+    con->textBuff = (unsigned char *)calloc (con->cols, con->rows);
+    con->attrBuff = (unsigned char *)calloc (con->cols, con->rows);
+    con->flagBuff = (unsigned char *)calloc (con->cols, con->rows);
     if (con->textBuff == NULL || con->attrBuff == NULL ||
         con->flagBuff == NULL)
         return false;
@@ -1027,9 +1027,9 @@
     int text_size = new_row * new_col;
     char* textBuff, *attrBuff, *flagBuff;
 
-    textBuff = (u_char *)calloc (text_size, 1);
-    attrBuff = (u_char *)calloc (text_size, 1);
-    flagBuff = (u_char *)calloc (text_size, 1);
+    textBuff = (unsigned char *)calloc (text_size, 1);
+    attrBuff = (unsigned char *)calloc (text_size, 1);
+    flagBuff = (unsigned char *)calloc (text_size, 1);
     
     if (textBuff == NULL || attrBuff == NULL || flagBuff == NULL)
         return false;
--- libminigui-1.3.3/vcongui/paint.c.diet	2004-09-19 13:28:48.940995664 +0200
+++ libminigui-1.3.3/vcongui/paint.c	2004-09-19 13:27:19.051660920 +0200
@@ -155,7 +155,7 @@
     TextOut (hdc, col * GetCharWidth (), row * GetCharHeight (), szCharBuff);
 }
 
-void WindowSput (PCONINFO con, u_char ch, int fc, int bc, int pos)
+void WindowSput (PCONINFO con, unsigned char ch, int fc, int bc, int pos)
 {
     char szCharBuff [2];
     HDC hdc;
--- libminigui-1.3.3/vcongui/vc.c.diet	2004-09-19 13:21:10.812641760 +0200
+++ libminigui-1.3.3/vcongui/vc.c	2004-09-19 13:22:11.016489384 +0200
@@ -136,17 +136,17 @@
 }
 #endif
 
-static inline u_int TextAddress (CONINFO *con, u_int x, u_int y)
+static inline unsigned int TextAddress (CONINFO *con, unsigned int x, unsigned int y)
 {
     return (con->textHead + x + y * con->dispxmax) % con->textSize;
 }
 
-static inline bool IsKanji (CONINFO *con, u_int x, u_int y)
+static inline bool IsKanji (CONINFO *con, unsigned int x, unsigned int y)
 {
     return(*(con->flagBuff + TextAddress (con, x, y)) & CODEIS_1);
 }
 
-static inline bool IsKanji2 (CONINFO *con, u_int x, u_int y)
+static inline bool IsKanji2 (CONINFO *con, unsigned int x, unsigned int y)
 {
     return(*(con->flagBuff + TextAddress (con, x, y)) & CODEIS_2);
 }
@@ -156,7 +156,7 @@
  ****************************************************************************/
 void TextDeleteChar (CONINFO *con, int n)
 {
-    u_int addr, dx;
+    unsigned int addr, dx;
     
     addr = TextAddress (con, con->x, con->y);
     dx = con->dispxmax - con->x - n;
@@ -174,7 +174,7 @@
 
 void TextInsertChar (CONINFO *con, int n)
 {
-    u_int addr, dx;
+    unsigned int addr, dx;
 
 #if 0
     addr = TextAddress (con, con->dispxmax, con->y);
@@ -347,10 +347,10 @@
     con->textClear = true;
 }
 
-void TextClearEol (CONINFO *con, u_char mode)
+void TextClearEol (CONINFO *con, unsigned char mode)
 {
-    u_int  addr;
-    u_char len, x=0;
+    unsigned int  addr;
+    unsigned char len, x=0;
 
     switch(mode) {
     case 1:
@@ -375,7 +375,7 @@
     bzero (con->flagBuff + addr, len);     /* needless to latch */
 }
 
-void TextClearEos (CONINFO *con, u_char mode)
+void TextClearEos (CONINFO *con, unsigned char mode)
 {
     int addr, len, y;
 
@@ -482,7 +482,7 @@
 {
     int fd;
     int from, to, y, swp, xx, x;
-    u_char ch, ch2;
+    unsigned char ch, ch2;
     char szTmpFileName [MAX_PATH];
 
     strcpy (szTmpFileName, COPY_FILE);
@@ -561,7 +561,7 @@
 
 void TextPaste (CONINFO *con)
 {
-    u_char ch;
+    unsigned char ch;
     int    fd;
     char szTmpFileName [MAX_PATH];
 
@@ -582,7 +582,7 @@
 {
     int fx, fy, tx, ty;
     int from, to, y, swp, xx, x;
-    u_char fc, bc, fc2, bc2;
+    unsigned char fc, bc, fc2, bc2;
 
     KanjiAdjust (con, ofx, ofy);
     KanjiAdjust (con, otx, oty);
@@ -627,9 +627,9 @@
 /****************************************************************************
  *                TextWput1/TextWput2/TextWput/TextSput                     *
  ****************************************************************************/
-void TextWput1 (CONINFO *con, u_char ch)
+void TextWput1 (CONINFO *con, unsigned char ch)
 {
-    u_int addr;
+    unsigned int addr;
 
     addr = TextAddress (con, con->x, con->y);
     con->attrBuff[addr] = con->fcol | (con->bcol << 4);
@@ -637,9 +637,9 @@
     con->flagBuff[addr] = con->db;
 }
 
-void TextWput2 (CONINFO *con, u_char ch)
+void TextWput2 (CONINFO *con, unsigned char ch)
 {
-    u_int addr;
+    unsigned int addr;
 
     addr = TextAddress (con, con->x, con->y);
     con->attrBuff[addr] = con->fcol | (con->bcol << 4);
@@ -650,9 +650,9 @@
     con->flagBuff[addr - 1] &= ~CLEAN_S;
 }
 
-void TextWput (CONINFO *con, u_char ch1, u_char ch2)
+void TextWput (CONINFO *con, unsigned char ch1, unsigned char ch2)
 {
-    u_int addr;
+    unsigned int addr;
 
     addr = TextAddress (con, con->x, con->y);
     con->attrBuff[addr] = con->fcol | (con->bcol << 4);
@@ -663,9 +663,9 @@
     con->flagBuff[addr+1] = LATCH_2;
 }
 
-void TextSput (CONINFO *con, u_char ch)
+void TextSput (CONINFO *con, unsigned char ch)
 {
-    u_int addr;
+    unsigned int addr;
 
     addr = TextAddress (con, con->x, con->y);
     con->flagBuff[addr] = LATCH_S | con->sb;
@@ -732,9 +732,9 @@
 void TextRefresh (CONINFO *con, bool bHideCaret)
 {
     int     x, y, i, j;
-    u_char  ch, ch2, fc, bc, flag;
+    unsigned char  ch, ch2, fc, bc, flag;
     int     color;
-    u_char  line [MAX_COLS + 1];
+    unsigned char  line [MAX_COLS + 1];
     int     count, startx;
 
     color = ((con->attr & ATTR_REVERSE) ? con->fcol : con->bcol) & 7; 
@@ -757,7 +757,7 @@
         count = 0;
         startx = 0;
         for (x = 0; x < con->dispxmax; x ++) {
-            u_char newfc, newbc;
+            unsigned char newfc, newbc;
                 
             i = (con->textHead + j ) % con->textSize;
 
--- libminigui-1.3.3/vcongui/vc.h.diet	2004-09-19 13:19:44.889704032 +0200
+++ libminigui-1.3.3/vcongui/vc.h	2004-09-19 13:23:03.063577024 +0200
@@ -86,9 +86,9 @@
 
     struct attrStack *saveAttr;
 
-    u_char* textBuff;
-    u_char* attrBuff;
-    u_char* flagBuff;
+    unsigned char* textBuff;
+    unsigned char* attrBuff;
+    unsigned char* flagBuff;
     
     bool    textClear;
     int     textHead, scrollLine;
@@ -96,14 +96,14 @@
     int     scroll;
     int     textSize; 
     
-    u_char  fcol;       /* foreground color */
-    u_char  bcol;       /* background color */
-    u_char  attr;       /* attribute */
-    u_char  sb;         /* 1 byte code */
-    u_char  db;         /* 2 byte code */
+    unsigned char  fcol;       /* foreground color */
+    unsigned char  bcol;       /* background color */
+    unsigned char  attr;       /* attribute */
+    unsigned char  sb;         /* 1 byte code */
+    unsigned char  db;         /* 2 byte code */
 
 #ifdef USECCEWAY
-    u_char  knj1;       /* 1 byte, first half of the double-byte char */
+    unsigned char  knj1;       /* 1 byte, first half of the double-byte char */
     short   knj1x, knj1y; /* position of first half of the double-byte char */
     short   knj2x, knj2y; /* position of second half of the double-byte char */
 #endif
@@ -111,14 +111,14 @@
     bool    cursorsw;
     bool    soft;
 
-    void (*esc)(struct _CONINFO* con, u_char);
+    void (*esc)(struct _CONINFO* con, unsigned char);
 
     enum {CS_LEFT, CS_RIGHT, CS_GRAPH, CS_DBCS} trans, g[2]; 
 
     bool    ins, wrap;
 
-    u_char  sysCoding;
-    u_short varg [MAX_NARG], narg;
+    unsigned char  sysCoding;
+    unsigned short varg [MAX_NARG], narg;
     bool question;
 
     key_info    kinfo;
@@ -154,8 +154,8 @@
 void ConsoleCleanup (void);
 
 void TextClearAll (CONINFO *con);
-void TextClearEol (CONINFO *con, u_char);
-void TextClearEos (CONINFO *con, u_char);
+void TextClearEol (CONINFO *con, unsigned char);
+void TextClearEos (CONINFO *con, unsigned char);
 void TextClearChars (CONINFO* con, int len);
 
 void TextDeleteChar (CONINFO *con, int);
@@ -166,10 +166,10 @@
 void GraphMode (void);
 void ScrollUp (CONINFO *con, int);
 void ScrollDown (CONINFO *con, int);
-void TextWput (CONINFO *con, u_char ch1, u_char ch2);
-void TextWput1 (CONINFO *con, u_char ch);
-void TextWput2 (CONINFO *con, u_char ch);
-void TextSput (CONINFO *con, u_char ch);
+void TextWput (CONINFO *con, unsigned char ch1, unsigned char ch2);
+void TextWput1 (CONINFO *con, unsigned char ch);
+void TextWput2 (CONINFO *con, unsigned char ch);
+void TextSput (CONINFO *con, unsigned char ch);
 void TextReverse (CONINFO *con, int* ofx, int* ofy, int* otx, int* oty);
 void TextRefresh (CONINFO *con, bool bHideCaret);
 void TextCopy (CONINFO *con, int fx, int fy, int tx, int ty);
--- libminigui-1.3.3/vcongui/key.c.diet	2004-09-19 13:25:28.066533224 +0200
+++ libminigui-1.3.3/vcongui/key.c	2004-09-19 13:29:19.265385656 +0200
@@ -40,7 +40,7 @@
 
 #include "key.h"
 
-extern ushort **key_maps;
+extern unsigned short **key_maps;
 extern struct kbdiacr *accent_table;
 extern unsigned int accent_table_size;
 extern char **func_table;
@@ -102,7 +102,7 @@
  * string, and in both cases we might assume that it is
  * in utf-8 already.
  */
-void to_utf8 (ushort c, key_info* kinfo)
+void to_utf8 (unsigned short c, key_info* kinfo)
 {
     if (c < 0x80)
         put_queue(c, kinfo);                /* 0*******  */
@@ -171,10 +171,10 @@
  */
 void handle_scancode_on_keydown (int scancode, key_info* kinfo)
 {
-    u_short keysym;
-    u_char type;
+    unsigned short keysym;
+    unsigned char type;
     int shift_final;
-    ushort *key_map;
+    unsigned short *key_map;
     
     shift_final = compute_shiftstate (kinfo->state);
 
@@ -205,10 +205,10 @@
 
 void handle_scancode_on_keyup (int scancode, key_info* kinfo)
 {
-    u_short keysym;
-    u_char type;
+    unsigned short keysym;
+    unsigned char type;
     int shift_final;
-    ushort *key_map;
+    unsigned short *key_map;
     
     shift_final = compute_shiftstate (kinfo->state);
 
--- libminigui-1.3.3/configs/config.in.diet	2004-09-19 10:39:25.069043616 +0200
+++ libminigui-1.3.3/configs/config.in	2004-09-19 11:56:04.845224560 +0200
@@ -269,11 +269,12 @@
 # compiler selection
 choice 'Compiler' \
         "arm-linux-gcc          CONFIG_COMPILER_ARM              \
-         armv4l-unknown-linux-gcc       CONFIG_COMPILER_ARMV4L           \
+         armv4l-unknown-linux-gcc       CONFIG_COMPILER_ARMV4L   \
          mipsel-linux-gcc       CONFIG_COMPILER_MIPSEL           \
          ppc-linux-gcc          CONFIG_COMPILER_PPC              \
          m68k-elf-gcc           CONFIG_COMPILER_M68K_ELF         \
          arm-elf-gcc            CONFIG_COMPILER_ARM_ELF          \
+         i386-dietlibc		CONFIG_COMPILER_X86_DIET         \
          i386                   CONFIG_COMPILER_X86"       i386
 
 # target selection
@@ -293,6 +294,7 @@
 # libc selection
 choice 'Libc' \
         "glibc          CONFIG_LIBC_GLIBC              \
+         dietlibc       CONFIG_LIBC_DIETLIBC           \
          uClibc         CONFIG_LIBC_UCLIBC"       glibc
 
 if [ "$CONFIG_COMPILER_X86" = "y" ]; then
@@ -302,6 +304,14 @@
     define_mystring CC   "gcc"
     define_mystring DEF_PREFIX "/usr/local"
 fi
+if [ "$CONFIG_COMPILER_X86_DIET" = "y" ]; then
+    define_mystring TARGET_ARCH "i386"
+    define_mystring TARGET "i386-dietlibc-linux"
+    define_mystring HOST "i386-dietlibc-linux"
+    define_mystring CC   "i386-dietlibc-linux-gcc"
+    define_mystring ADD_CFLAGS "-D_BSD_SOURCE -Os -fPIC"
+    define_mystring DEF_PREFIX "/opt/diet"
+fi
 if [ "$CONFIG_COMPILER_ARM" = "y" ]; then
     define_mystring TARGET_ARCH "arm"
     define_mystring TARGET "arm-linux"
@@ -377,6 +387,11 @@
     mystring 'uClibc header' UCLIBC_HEADER $/usr/$TARGET_ARCH-linux-uclibc/include
     mystring 'uClibc lib' UCLIBC_LIB $/usr/$TARGET_ARCH-linux-uclibc/lib
   fi
+  if [ "$CONFIG_LIBC_DIETLIBC" = "y" ]; then
+    comment 'Options for dietlibc'
+    mystring 'dietlibc header' DIETLIBC_HEADER $/opt/diet/include
+    mystring 'dietlibc lib' DIETLIBC_LIB $/opt/diet/lib-$TARGET_ARCH
+  fi
 fi
 
 # must needed ?
--- libminigui-1.3.3/scripts/mkconfig.diet	2004-09-19 11:59:47.959306064 +0200
+++ libminigui-1.3.3/scripts/mkconfig	2004-09-19 12:09:39.135433632 +0200
@@ -187,8 +187,8 @@
 
 
     echo "CC=$CC \\" >> $CONFIG_MNU
-    #echo "CFLAGS=\"$CFLAGS\" \\" >> $CONFIG_MNU
-    #echo "LDFLAGS=\"$LDFLAGS\" \\" >> $CONFIG_MNU
+    echo "CFLAGS=\"$CFLAGS\" \\" >> $CONFIG_MNU
+    echo "LDFLAGS=\"$LDFLAGS\" \\" >> $CONFIG_MNU
     echo "./configure \\" >> $CONFIG_MNU
     echo "    --prefix=$prefix \\" >> $CONFIG_MNU
     echo "    --target=$TARGET \\" >> $CONFIG_MNU
--- libminigui-1.3.3/src/kernel/init.c.diet	2004-09-19 11:01:30.849494352 +0200
+++ libminigui-1.3.3/src/kernel/init.c	2004-09-19 12:54:57.960249600 +0200
@@ -39,8 +39,12 @@
 #include <signal.h>
 
 #ifndef __NOLINUX__
+#ifdef __dietlibc__
+#include <termios.h>
+#else
 #include <sys/termios.h>
 #endif
+#endif
 
 #include "common.h"
 #include "minigui.h"
@@ -431,9 +435,11 @@
         pthread_join (__mg_timer, NULL);
     }
     else {
-#ifndef __ECOS            
+#ifndef __ECOS
+#ifndef __dietlibc__
         pthread_kill_other_threads_np ();
 #endif
+#endif
     }
    
     DestroyMsgQueue (&__mg_dsk_msgs);
--- libminigui-1.3.3/src/control/progressbar.c.diet	2004-09-19 11:26:06.384632128 +0200
+++ libminigui-1.3.3/src/control/progressbar.c	2004-09-19 11:28:19.009470088 +0200
@@ -79,6 +79,22 @@
 }
 #endif
 
+#ifdef __dietlibc__
+typedef struct
+{
+  long int quot;	/* Quotient.  */
+  long int rem;		/* Remainder.  */
+} ldiv_t;
+
+ldiv_t ldiv(long numer, long denom)
+{
+    ldiv_t result;
+    result.quot = numer / denom;
+    result.rem  = numer - (result.quot * denom);
+    return(result);
+}
+#endif
+
 static void pbarOnDraw (HWND hwnd, HDC hdc, PROGRESSDATA* pData, BOOL fVertical)
 {
     RECT    rcClient;
--- libminigui-1.3.3/src/gui/keyboard.h.diet	2004-09-19 11:33:03.434230952 +0200
+++ libminigui-1.3.3/src/gui/keyboard.h	2004-09-19 11:40:06.217958056 +0200
@@ -25,6 +25,11 @@
 #define VC_CRLF         0x0080   /* 0 - enter sends CR, 1 - enter sends CRLF */
 #define VC_META         0x0100   /* 0 - meta, 1 - meta=prefix with ESC */
 
+#ifdef __dietlibc__
+typedef unsigned short ushort;
+typedef unsigned short u_short;
+#endif
+
 typedef struct _key_info
 {
     DWORD kbd_mode;
--- libminigui-1.3.3/src/misc/misc.c.diet	2004-09-19 11:19:43.213882936 +0200
+++ libminigui-1.3.3/src/misc/misc.c	2004-09-19 11:20:29.663821472 +0200
@@ -635,7 +635,11 @@
 #ifndef __NOLINUX__
 
 #include <linux/kd.h>
+#ifdef __dietlibc__
+#include <sys/param.h>
+#else
 #include <asm/param.h>
+#endif
 
 void GUIAPI Tone (int frequency_hz, int duration_ms)
 {
--- libminigui-1.3.3/src/newgal/fbcon/fbvideo.c.diet	2004-09-19 13:10:02.076802992 +0200
+++ libminigui-1.3.3/src/newgal/fbcon/fbvideo.c	2004-09-19 13:11:05.726126824 +0200
@@ -35,7 +35,11 @@
 #include <unistd.h>
 #include <sys/ioctl.h>
 #include <sys/mman.h>
+#ifdef __dietlibc__
+#include <sys/shm.h>
+#else
 #include <asm/page.h>        /* For definition of PAGE_SIZE */
+#endif
 
 #include <linux/vt.h>
 #include <linux/kd.h>
